<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NLP Business Intelligence â€” Live Demo</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,300;0,400;0,500;1,300&family=Syne:wght@400;500;600;700;800&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
<style>
:root {
  --bg:     #050B14;
  --bg2:    #0A1628;
  --bg3:    #0F1E38;
  --card:   #0D192E;
  --border: #1A2D4A;
  --text:   #DCE8F8;
  --dim:    #5A7A9E;
  --pos:    #10D98B;
  --neu:    #F5A623;
  --neg:    #FF4C6A;
  --ind:    #7C8FFF;
  --ind2:   #A5B4FC;
  --teal:   #22D3EE;
  --pink:   #F472B6;
  --font-display: 'Syne', sans-serif;
  --font-body:    'DM Sans', sans-serif;
  --font-mono:    'IBM Plex Mono', monospace;
}

* { box-sizing: border-box; margin: 0; padding: 0; }

body {
  background: var(--bg);
  color: var(--text);
  font-family: var(--font-body);
  font-size: 13px;
  min-height: 100vh;
  overflow-x: hidden;
}

/* Noise texture overlay */
body::before {
  content: '';
  position: fixed; inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='300'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='300' height='300' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E");
  pointer-events: none; z-index: 0;
}

.everything { position: relative; z-index: 1; }

/* â”€â”€ SIDEBAR â”€â”€ */
.layout { display: flex; min-height: 100vh; }

.sidebar {
  width: 220px; flex-shrink: 0;
  background: var(--bg2);
  border-right: 1px solid var(--border);
  padding: 24px 0;
  position: sticky; top: 0; height: 100vh;
  overflow-y: auto;
}

.sidebar-logo {
  padding: 0 20px 20px;
  border-bottom: 1px solid var(--border);
  margin-bottom: 20px;
}

.sidebar-logo-icon {
  font-size: 22px; margin-bottom: 8px;
}

.sidebar-title {
  font-family: var(--font-display);
  font-size: 14px; font-weight: 700;
  color: var(--text); letter-spacing: 0.02em;
}

.sidebar-sub {
  font-size: 10px; color: var(--dim);
  letter-spacing: 0.08em;
  margin-top: 3px;
}

.sidebar-section {
  padding: 0 12px;
  margin-bottom: 20px;
}

.sidebar-section-label {
  font-size: 9px; letter-spacing: 0.2em;
  text-transform: uppercase; color: var(--dim);
  margin-bottom: 8px; padding: 0 8px;
}

.nav-item {
  display: flex; align-items: center; gap: 10px;
  padding: 8px 12px;
  border-radius: 6px;
  font-size: 12px; font-weight: 500;
  color: var(--dim);
  cursor: pointer;
  transition: all 0.2s;
  margin-bottom: 2px;
}

.nav-item:hover { background: var(--bg3); color: var(--text); }
.nav-item.active { background: rgba(124,143,255,0.15); color: var(--ind2); }

.nav-icon { font-size: 14px; width: 18px; text-align: center; }

/* Filter pill */
.filter-chip {
  display: inline-flex; align-items: center; gap: 5px;
  background: var(--bg3); border: 1px solid var(--border);
  border-radius: 4px; padding: 4px 8px;
  font-size: 10px; color: var(--dim);
  margin: 2px; cursor: default;
}

/* â”€â”€ MAIN CONTENT â”€â”€ */
.main { flex: 1; padding: 28px 32px; min-width: 0; overflow: hidden; }

/* â”€â”€ TAB SYSTEM â”€â”€ */
.tabs {
  display: flex; gap: 0;
  border-bottom: 1px solid var(--border);
  margin-bottom: 28px;
  overflow-x: auto;
}

.tab {
  padding: 10px 20px;
  font-size: 11.5px; font-weight: 500;
  color: var(--dim);
  cursor: pointer;
  border-bottom: 2px solid transparent;
  margin-bottom: -1px;
  transition: all 0.2s;
  white-space: nowrap;
  font-family: var(--font-body);
}

.tab:hover { color: var(--text); }
.tab.active { color: var(--ind2); border-bottom-color: var(--ind2); }

.tab-panel { display: none; }
.tab-panel.active { display: block; animation: fadeIn 0.3s ease; }

@keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }

/* â”€â”€ PAGE HEADER â”€â”€ */
.page-header { margin-bottom: 24px; }
.page-title {
  font-family: var(--font-display);
  font-size: 22px; font-weight: 700;
  color: var(--text); letter-spacing: -0.01em;
}
.page-meta { font-size: 11px; color: var(--dim); margin-top: 4px; }

/* â”€â”€ METRIC CARDS â”€â”€ */
.kpi-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 12px; margin-bottom: 24px;
}

.kpi-card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 8px; padding: 18px;
  position: relative; overflow: hidden;
  transition: border-color 0.3s, transform 0.2s;
}

.kpi-card:hover { border-color: rgba(124,143,255,0.4); transform: translateY(-2px); }

.kpi-card::after {
  content: ''; position: absolute;
  top: 0; left: 0; right: 0; height: 2px;
  background: linear-gradient(90deg, var(--ind), transparent);
  opacity: 0; transition: opacity 0.3s;
}
.kpi-card:hover::after { opacity: 1; }

.kpi-label {
  font-size: 9px; letter-spacing: 0.18em;
  text-transform: uppercase; color: var(--dim);
  margin-bottom: 10px;
}

.kpi-value {
  font-family: var(--font-mono);
  font-size: 26px; font-weight: 400;
  color: var(--text); line-height: 1;
  margin-bottom: 8px;
  letter-spacing: -0.02em;
}

.kpi-delta {
  font-size: 11px; font-family: var(--font-mono);
  display: flex; align-items: center; gap: 4px;
}
.kpi-delta.up   { color: var(--pos); }
.kpi-delta.down { color: var(--neg); }
.kpi-delta.flat { color: var(--dim); }

/* â”€â”€ CHART CARDS â”€â”€ */
.chart-card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 8px; padding: 22px;
  margin-bottom: 16px;
}

.chart-card-header {
  display: flex; justify-content: space-between;
  align-items: flex-start; margin-bottom: 20px;
}

.chart-card-title {
  font-family: var(--font-display);
  font-size: 14px; font-weight: 600;
  color: var(--text); margin-bottom: 3px;
}

.chart-card-sub { font-size: 11px; color: var(--dim); }

.badge {
  font-size: 9px; letter-spacing: 0.12em;
  text-transform: uppercase; padding: 4px 10px;
  border-radius: 3px; font-weight: 500;
  font-family: var(--font-mono);
}

.badge-pos  { background: rgba(16,217,139,0.1); color: var(--pos); border: 1px solid rgba(16,217,139,0.2); }
.badge-neg  { background: rgba(255,76,106,0.1);  color: var(--neg); border: 1px solid rgba(255,76,106,0.2); }
.badge-ind  { background: rgba(124,143,255,0.1); color: var(--ind2); border: 1px solid rgba(124,143,255,0.2); }
.badge-neu  { background: rgba(245,166,35,0.1);  color: var(--neu); border: 1px solid rgba(245,166,35,0.2); }

/* â”€â”€ GRID LAYOUTS â”€â”€ */
.grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px; }
.grid-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 16px; margin-bottom: 16px; }
.grid-13 { display: grid; grid-template-columns: 1fr 2fr; gap: 16px; margin-bottom: 16px; }

/* â”€â”€ ACTION ITEMS â”€â”€ */
.action-card {
  background: var(--bg3);
  border-left: 3px solid var(--ind);
  border-radius: 0 6px 6px 0;
  padding: 14px 18px; margin-bottom: 10px;
  transition: border-left-color 0.2s;
}

.action-card:hover { border-left-color: var(--ind2); }
.action-priority { font-size: 10px; color: var(--ind2); letter-spacing: 0.15em; margin-bottom: 5px; font-family: var(--font-mono); }
.action-title { font-size: 13px; font-weight: 500; color: var(--text); margin-bottom: 5px; }
.action-desc { font-size: 11.5px; color: var(--dim); line-height: 1.6; margin-bottom: 8px; }
.action-meta { display: flex; gap: 16px; font-size: 10px; }
.action-impact { color: var(--pos); font-family: var(--font-mono); font-weight: 500; }
.action-effort { color: var(--dim); }

/* â”€â”€ RISK FLAGS â”€â”€ */
.risk-card {
  background: var(--bg3);
  border-left: 3px solid var(--neg);
  border-radius: 0 6px 6px 0;
  padding: 12px 16px; margin-bottom: 8px;
}

.risk-severity { font-size: 10px; font-family: var(--font-mono); letter-spacing: 0.12em; margin-bottom: 4px; }
.risk-title { font-size: 12.5px; font-weight: 500; color: var(--text); margin-bottom: 4px; }
.risk-desc { font-size: 11px; color: var(--dim); }

/* â”€â”€ SCATTER PLOT DOTS â”€â”€ */
.scatter-container { position: relative; height: 380px; overflow: hidden; border-radius: 4px; background: var(--bg3); }
.dot {
  position: absolute;
  width: 6px; height: 6px;
  border-radius: 50%;
  opacity: 0.7;
  transition: opacity 0.2s, transform 0.2s;
  cursor: pointer;
}
.dot:hover { opacity: 1; transform: scale(2); z-index: 10; }
.dot.pos { background: var(--pos); }
.dot.neu { background: var(--neu); }
.dot.neg { background: var(--neg); }

/* â”€â”€ TOPIC TABLE â”€â”€ */
.topic-table { width: 100%; border-collapse: collapse; }
.topic-table th {
  font-size: 9px; letter-spacing: 0.15em;
  text-transform: uppercase; color: var(--dim);
  padding: 8px 12px; text-align: left;
  border-bottom: 1px solid var(--border);
}
.topic-table td {
  padding: 10px 12px;
  border-bottom: 1px solid rgba(26,45,74,0.5);
  font-size: 12px;
}
.topic-bar { height: 4px; border-radius: 2px; background: var(--ind); display: inline-block; }

/* â”€â”€ REVIEW CARD â”€â”€ */
.review-card {
  background: var(--bg3); border: 1px solid var(--border);
  border-radius: 6px; padding: 14px 16px; margin-bottom: 8px;
}
.review-meta { display: flex; gap: 12px; margin-bottom: 8px; font-size: 11px; color: var(--dim); }
.review-text { font-size: 12.5px; color: var(--text); line-height: 1.65; }

/* â”€â”€ HEATMAP CELLS â”€â”€ */
.heat-table { width: 100%; border-collapse: collapse; }
.heat-table th {
  font-size: 9px; letter-spacing: 0.12em; text-transform: uppercase;
  color: var(--dim); padding: 6px 8px; text-align: center;
}
.heat-table th:first-child { text-align: left; }
.heat-table td {
  padding: 7px 8px; text-align: center;
  font-family: var(--font-mono); font-size: 11px;
  border-radius: 3px; cursor: default;
  transition: transform 0.15s;
}
.heat-table td:first-child {
  text-align: left; font-family: var(--font-body);
  color: var(--dim); background: transparent !important;
}
.heat-table td:hover { transform: scale(1.15); }

/* â”€â”€ SEARCH BOX â”€â”€ */
.search-box {
  display: flex; gap: 10px; margin-bottom: 20px;
}
.search-input {
  flex: 1; background: var(--bg3); border: 1px solid var(--border);
  border-radius: 6px; padding: 10px 16px;
  color: var(--text); font-size: 13px; font-family: var(--font-body);
  outline: none; transition: border-color 0.2s;
}
.search-input:focus { border-color: var(--ind); }
.search-input::placeholder { color: var(--dim); }
.search-btn {
  background: var(--ind); color: white;
  border: none; border-radius: 6px;
  padding: 10px 20px; font-size: 12px;
  cursor: pointer; font-family: var(--font-body);
  font-weight: 500; transition: opacity 0.2s;
}
.search-btn:hover { opacity: 0.85; }

/* â”€â”€ SCROLLBAR â”€â”€ */
::-webkit-scrollbar { width: 4px; }
::-webkit-scrollbar-track { background: var(--bg); }
::-webkit-scrollbar-thumb { background: var(--border); border-radius: 4px; }

/* â”€â”€ ANIMATIONS â”€â”€ */
.kpi-card { animation: fadeUp 0.4s ease both; }
.kpi-card:nth-child(1){animation-delay:.05s}
.kpi-card:nth-child(2){animation-delay:.10s}
.kpi-card:nth-child(3){animation-delay:.15s}
.kpi-card:nth-child(4){animation-delay:.20s}
.kpi-card:nth-child(5){animation-delay:.25s}

@keyframes fadeUp {
  from { opacity:0; transform:translateY(12px); }
  to   { opacity:1; transform:translateY(0); }
}
</style>
</head>
<body>
<div class="everything">
<div class="layout">

<!-- â”€â”€ SIDEBAR â”€â”€ -->
<aside class="sidebar">
  <div class="sidebar-logo">
    <div class="sidebar-logo-icon">ğŸ§ </div>
    <div class="sidebar-title">NLP Intelligence</div>
    <div class="sidebar-sub">MERIDIAN COMMERCE</div>
  </div>

  <div class="sidebar-section">
    <div class="sidebar-section-label">Analysis</div>
    <div class="nav-item active" onclick="switchTab('exec')">
      <span class="nav-icon">ğŸ“Š</span> Executive Summary
    </div>
    <div class="nav-item" onclick="switchTab('sentiment')">
      <span class="nav-icon">ğŸ˜Š</span> Sentiment Analysis
    </div>
    <div class="nav-item" onclick="switchTab('topics')">
      <span class="nav-icon">ğŸ·ï¸</span> Topic Modeling
    </div>
    <div class="nav-item" onclick="switchTab('embed')">
      <span class="nav-icon">ğŸ—ºï¸</span> Embedding Explorer
    </div>
    <div class="nav-item" onclick="switchTab('search')">
      <span class="nav-icon">ğŸ”</span> Review Search
    </div>
  </div>

  <div class="sidebar-section">
    <div class="sidebar-section-label">Filters</div>
    <div style="padding:0 8px">
      <div style="font-size:10px;color:var(--dim);margin-bottom:6px">Categories</div>
      <div>
        <span class="filter-chip">Electronics</span>
        <span class="filter-chip">Clothing</span>
        <span class="filter-chip">Home & Kitchen</span>
        <span class="filter-chip">Sports</span>
        <span class="filter-chip">Beauty</span>
      </div>
      <div style="font-size:10px;color:var(--dim);margin:12px 0 6px">Sentiment</div>
      <div>
        <span class="filter-chip" style="color:var(--pos)">â— Positive</span>
        <span class="filter-chip" style="color:var(--neu)">â— Neutral</span>
        <span class="filter-chip" style="color:var(--neg)">â— Negative</span>
      </div>
    </div>
  </div>

  <div class="sidebar-section">
    <div class="sidebar-section-label">Model</div>
    <div style="padding:0 8px;font-size:11px;color:var(--dim)">
      <div style="margin-bottom:6px">Sentiment: <span style="color:var(--ind2)">VADER</span></div>
      <div style="margin-bottom:6px">Topics: <span style="color:var(--ind2)">LDA (8)</span></div>
      <div>Embeddings: <span style="color:var(--ind2)">MiniLM-L6</span></div>
    </div>
  </div>

  <div class="sidebar-section" style="margin-top:auto">
    <div style="padding:0 8px">
      <div style="font-size:10px;color:var(--dim);margin-bottom:4px">Dataset</div>
      <div style="font-family:var(--font-mono);font-size:11px;color:var(--text)">2,000 reviews</div>
      <div style="font-size:10px;color:var(--dim)">5 categories Â· 24 months</div>
    </div>
  </div>
</aside>

<!-- â”€â”€ MAIN â”€â”€ -->
<main class="main">

<!-- TABS -->
<div class="tabs">
  <div class="tab active" onclick="switchTab('exec')">ğŸ“Š Executive Summary</div>
  <div class="tab" onclick="switchTab('sentiment')">ğŸ˜Š Sentiment Analysis</div>
  <div class="tab" onclick="switchTab('topics')">ğŸ·ï¸ Topic Modeling</div>
  <div class="tab" onclick="switchTab('embed')">ğŸ—ºï¸ Embedding Explorer</div>
  <div class="tab" onclick="switchTab('search')">ğŸ” Review Search</div>
</div>


<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• EXEC SUMMARY â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="tab-exec" class="tab-panel active">

  <div class="page-header">
    <div class="page-title">Executive Intelligence Summary</div>
    <div class="page-meta">Generated 2024-12-31 Â· 2,000 reviews analyzed Â· Trailing 24 months</div>
  </div>

  <!-- KPIs -->
  <div class="kpi-grid">
    <div class="kpi-card">
      <div class="kpi-label">Sentiment Score</div>
      <div class="kpi-value">72.4</div>
      <div class="kpi-delta up">â–² +4.2 vs prev</div>
    </div>
    <div class="kpi-card">
      <div class="kpi-label">NPS Equivalent</div>
      <div class="kpi-value">+38</div>
      <div class="kpi-delta up">â–² +8 pts</div>
    </div>
    <div class="kpi-card">
      <div class="kpi-label">CSAT</div>
      <div class="kpi-value">71.3%</div>
      <div class="kpi-delta up">â–² +3.1pp</div>
    </div>
    <div class="kpi-card">
      <div class="kpi-label">Positive Reviews</div>
      <div class="kpi-value">62.4%</div>
      <div class="kpi-delta up">1,248 reviews</div>
    </div>
    <div class="kpi-card">
      <div class="kpi-label">Negative Reviews</div>
      <div class="kpi-value">18.1%</div>
      <div class="kpi-delta down">362 reviews</div>
    </div>
  </div>

  <!-- Financial Impact -->
  <div class="grid-3">
    <div class="kpi-card" style="border-top:2px solid var(--neg)">
      <div class="kpi-label">Revenue at Risk</div>
      <div class="kpi-value" style="font-size:22px;color:var(--neg)">$524K/yr</div>
      <div class="kpi-delta flat">From negative sentiment</div>
    </div>
    <div class="kpi-card" style="border-top:2px solid var(--pos)">
      <div class="kpi-label">Recoverable Revenue</div>
      <div class="kpi-value" style="font-size:22px;color:var(--pos)">$218K/yr</div>
      <div class="kpi-delta flat">If top issue resolved</div>
    </div>
    <div class="kpi-card" style="border-top:2px solid var(--ind)">
      <div class="kpi-label">Upsell Opportunity</div>
      <div class="kpi-value" style="font-size:22px;color:var(--ind2)">$748K/yr</div>
      <div class="kpi-delta flat">High-satisfaction segment</div>
    </div>
  </div>

  <div class="grid-2">
    <!-- Sentiment Pie -->
    <div class="chart-card">
      <div class="chart-card-header">
        <div>
          <div class="chart-card-title">Sentiment Distribution</div>
          <div class="chart-card-sub">2,000 reviews Â· All categories</div>
        </div>
        <div class="badge badge-pos">Positive majority</div>
      </div>
      <canvas id="pieChart" style="max-height:220px"></canvas>
    </div>

    <!-- Category breakdown -->
    <div class="chart-card">
      <div class="chart-card-header">
        <div>
          <div class="chart-card-title">Sentiment by Category</div>
          <div class="chart-card-sub">Stacked by sentiment label</div>
        </div>
      </div>
      <canvas id="catChart" style="max-height:220px"></canvas>
    </div>
  </div>

  <!-- Action Items -->
  <div class="chart-card">
    <div class="chart-card-header">
      <div>
        <div class="chart-card-title">ğŸ¯ Priority Action Items</div>
        <div class="chart-card-sub">Ranked by estimated revenue impact</div>
      </div>
      <div class="badge badge-ind">4 Items</div>
    </div>

    <div class="action-card">
      <div class="action-priority">#1 PRIORITY Â· PRODUCT QUALITY</div>
      <div class="action-title">42% of Product Quality reviews are negative (152 reviews)</div>
      <div class="action-desc">Audit top-returned SKUs. Partner with QA on material specs. Add 30-day quality guarantee to reduce purchase friction.</div>
      <div class="action-meta">
        <span class="action-impact">+$218K/yr</span>
        <span class="action-effort">Effort: Medium Â· 4â€“8 weeks</span>
      </div>
    </div>

    <div class="action-card">
      <div class="action-priority">#2 PRIORITY Â· SHIPPING & DELIVERY</div>
      <div class="action-title">38% of Shipping reviews are negative (98 reviews)</div>
      <div class="action-desc">Negotiate SLA with logistics partners. Set up proactive delay notifications. Consider regional warehouse for top 3 markets.</div>
      <div class="action-meta">
        <span class="action-impact">+$142K/yr</span>
        <span class="action-effort">Effort: High Â· 8â€“12 weeks</span>
      </div>
    </div>

    <div class="action-card">
      <div class="action-priority">#3 PRIORITY Â· CUSTOMER SERVICE</div>
      <div class="action-title">29% of Customer Service reviews are negative (74 reviews)</div>
      <div class="action-desc">Implement AI-assisted triage for common issues. Target first-response under 4 hours. Train team on top 3 complaint categories.</div>
      <div class="action-meta">
        <span class="action-impact">+$89K/yr</span>
        <span class="action-effort">Effort: Medium Â· 3â€“6 weeks</span>
      </div>
    </div>

    <div class="action-card" style="border-left-color:var(--pos)">
      <div class="action-priority" style="color:var(--pos)">#4 OPPORTUNITY Â· OVERALL POSITIVE</div>
      <div class="action-title">Customers consistently praise Ease of Use â€” leverage this</div>
      <div class="action-desc">Feature Ease of Use prominently in marketing. Upsell loyal customers with highest satisfaction scores via targeted campaigns.</div>
      <div class="action-meta">
        <span class="action-impact">+12% upsell conversion</span>
        <span class="action-effort">Effort: Low Â· 2â€“3 weeks</span>
      </div>
    </div>
  </div>

  <!-- Risk Flags -->
  <div class="chart-card">
    <div class="chart-card-title" style="margin-bottom:14px">âš ï¸ Risk Flags</div>
    <div class="risk-card">
      <div class="risk-severity" style="color:var(--neg)">[HIGH] SENTIMENT TREND</div>
      <div class="risk-title">Negative rate increased +5.8pp in last 60 days</div>
      <div class="risk-desc">Metric: 22.3% vs 16.5% earlier period Â· Trend: Deteriorating</div>
    </div>
    <div class="risk-card" style="border-left-color:var(--neu)">
      <div class="risk-severity" style="color:var(--neu)">[MEDIUM] TOPIC CONCENTRATION</div>
      <div class="risk-title">Product Quality dominates 43% of recent reviews</div>
      <div class="risk-desc">Metric: 43% of last-30-day reviews Â· Trend: Spike detected</div>
    </div>
  </div>

</div><!-- /exec -->


<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SENTIMENT â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="tab-sentiment" class="tab-panel">

  <div class="page-header">
    <div class="page-title">Sentiment Analysis</div>
    <div class="page-meta">VADER lexicon Â· 2,000 reviews Â· Multi-aspect extraction</div>
  </div>

  <div class="chart-card">
    <div class="chart-card-header">
      <div>
        <div class="chart-card-title">Sentiment Trend Over Time</div>
        <div class="chart-card-sub">Monthly review volume by sentiment</div>
      </div>
      <div class="badge badge-neg">â†‘ Negative trend Q4</div>
    </div>
    <canvas id="trendChart" style="height:260px"></canvas>
  </div>

  <div class="grid-2">
    <div class="chart-card">
      <div class="chart-card-header">
        <div class="chart-card-title">Compound Score Distribution</div>
        <div class="chart-card-sub">-1 (negative) â†’ +1 (positive)</div>
      </div>
      <canvas id="histChart" style="height:220px"></canvas>
    </div>

    <div class="chart-card">
      <div class="chart-card-header">
        <div class="chart-card-title">Aspect-Based Sentiment Heatmap</div>
        <div class="chart-card-sub">Per-dimension sentiment by category</div>
      </div>
      <table class="heat-table" id="heatTable">
        <thead>
          <tr>
            <th>Category</th>
            <th>Quality</th>
            <th>Shipping</th>
            <th>Service</th>
            <th>Value</th>
            <th>Ease of Use</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <div class="chart-card">
    <div class="chart-card-header">
      <div class="chart-card-title">Star Rating Distribution by Sentiment</div>
    </div>
    <canvas id="starsChart" style="height:200px"></canvas>
  </div>

</div><!-- /sentiment -->


<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• TOPICS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="tab-topics" class="tab-panel">

  <div class="page-header">
    <div class="page-title">Topic Modeling</div>
    <div class="page-meta">LDA Â· 8 topics Â· 2,000 documents</div>
  </div>

  <div class="grid-13">
    <div class="chart-card">
      <div class="chart-card-title" style="margin-bottom:16px">Topic Distribution</div>
      <canvas id="topicBarChart" style="height:320px"></canvas>
    </div>

    <div class="chart-card">
      <div class="chart-card-title" style="margin-bottom:16px">Topic Ã— Sentiment Breakdown</div>
      <canvas id="topicSentChart" style="height:320px"></canvas>
    </div>
  </div>

  <div class="chart-card">
    <div class="chart-card-header">
      <div class="chart-card-title">Topic Details & Top Keywords</div>
      <div class="chart-card-sub">c-TF-IDF weighted keywords per topic</div>
    </div>
    <table class="topic-table" id="topicTable">
      <thead>
        <tr>
          <th>Topic</th>
          <th>Volume</th>
          <th>Neg Rate</th>
          <th>Top Keywords</th>
          <th>Sentiment</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

</div><!-- /topics -->


<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• EMBEDDINGS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="tab-embed" class="tab-panel">

  <div class="page-header">
    <div class="page-title">Embedding Explorer</div>
    <div class="page-meta">all-MiniLM-L6-v2 â†’ UMAP 2D projection Â· 2,000 reviews</div>
  </div>

  <div style="display:flex;gap:16px;margin-bottom:16px">
    <span style="font-size:11px;color:var(--dim)">Color by:</span>
    <span class="badge badge-ind" id="colorBySent" style="cursor:pointer" onclick="colorBy('sentiment')">Sentiment</span>
    <span class="badge" id="colorByTopic" style="cursor:pointer;background:var(--bg3);color:var(--dim);border:1px solid var(--border)" onclick="colorBy('topic')">Topic</span>
  </div>

  <div class="chart-card">
    <div class="chart-card-header">
      <div>
        <div class="chart-card-title">Semantic Review Map (UMAP)</div>
        <div class="chart-card-sub">Each dot is one review Â· Hover to inspect Â· Similar reviews cluster together</div>
      </div>
      <div class="badge badge-ind">2,000 points</div>
    </div>
    <div class="scatter-container" id="scatterContainer"></div>
    <div style="display:flex;gap:20px;margin-top:12px;flex-wrap:wrap">
      <div style="display:flex;align-items:center;gap:6px;font-size:11px;color:var(--dim)">
        <div style="width:8px;height:8px;border-radius:50%;background:var(--pos)"></div> Positive
      </div>
      <div style="display:flex;align-items:center;gap:6px;font-size:11px;color:var(--dim)">
        <div style="width:8px;height:8px;border-radius:50%;background:var(--neu)"></div> Neutral
      </div>
      <div style="display:flex;align-items:center;gap:6px;font-size:11px;color:var(--dim)">
        <div style="width:8px;height:8px;border-radius:50%;background:var(--neg)"></div> Negative
      </div>
    </div>
  </div>

  <div class="chart-card">
    <div class="chart-card-title" style="margin-bottom:12px">ğŸ“– How to Read This Chart</div>
    <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:16px">
      <div style="background:var(--bg3);border-radius:6px;padding:14px">
        <div style="font-size:12px;font-weight:500;color:var(--ind2);margin-bottom:6px">Clusters = Topics</div>
        <div style="font-size:11px;color:var(--dim);line-height:1.6">Reviews about the same subject cluster together in embedding space regardless of sentiment.</div>
      </div>
      <div style="background:var(--bg3);border-radius:6px;padding:14px">
        <div style="font-size:12px;font-weight:500;color:var(--pos);margin-bottom:6px">Mixed Color = Disagreement</div>
        <div style="font-size:11px;color:var(--dim);line-height:1.6">A cluster with mixed pos/neg dots means customers agree on the topic but disagree on quality.</div>
      </div>
      <div style="background:var(--bg3);border-radius:6px;padding:14px">
        <div style="font-size:12px;font-weight:500;color:var(--neu);margin-bottom:6px">Outliers = Unusual</div>
        <div style="font-size:11px;color:var(--dim);line-height:1.6">Isolated dots discuss unique topics or use very different language from the majority.</div>
      </div>
    </div>
  </div>

</div><!-- /embed -->


<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SEARCH â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="tab-search" class="tab-panel">

  <div class="page-header">
    <div class="page-title">Semantic Review Search</div>
    <div class="page-meta">Find reviews by meaning â€” not just keyword matching</div>
  </div>

  <div class="chart-card">
    <div class="search-box">
      <input class="search-input" id="searchInput" placeholder='e.g. "product stopped working" or "excellent customer support"'
             onkeydown="if(event.key==='Enter')runSearch()">
      <button class="search-btn" onclick="runSearch()">Search</button>
    </div>
    <div style="font-size:11px;color:var(--dim);margin-bottom:16px">Try: product quality Â· shipping delay Â· easy to use Â· great value</div>
    <div id="searchResults"></div>
  </div>

  <div class="chart-card">
    <div class="chart-card-title" style="margin-bottom:14px">Export Data</div>
    <div style="display:flex;gap:10px">
      <button class="search-btn">ğŸ“¥ Download Enriched Reviews CSV</button>
      <button class="search-btn" style="background:var(--bg3);border:1px solid var(--border);color:var(--text)">ğŸ“„ Business Impact Report (MD)</button>
    </div>
  </div>

</div><!-- /search -->

</main>
</div>
</div>

<!-- TOOLTIP -->
<div id="tooltip" style="position:fixed;background:var(--card);border:1px solid var(--border);border-radius:6px;padding:10px 14px;font-size:11px;pointer-events:none;opacity:0;transition:opacity 0.15s;z-index:999;max-width:280px;line-height:1.6"></div>

<script>

// â”€â”€ TAB SWITCHING â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function switchTab(name) {
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
  document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
  event.currentTarget.classList.add('active');
  document.getElementById('tab-' + name).classList.add('active');
  // sync sidebar
  const idx = ['exec','sentiment','topics','embed','search'].indexOf(name);
  document.querySelectorAll('.nav-item')[idx]?.classList.add('active');
}

// â”€â”€ CHART THEME â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Chart.defaults.color = '#5A7A9E';
Chart.defaults.borderColor = '#1A2D4A';
Chart.defaults.font.family = "'IBM Plex Mono', monospace";
Chart.defaults.font.size = 10;

const TT = {
  backgroundColor: '#0D192E',
  borderColor: '#1A2D4A',
  borderWidth: 1,
  padding: 10,
  titleColor: '#DCE8F8',
  bodyColor: '#5A7A9E',
  cornerRadius: 6,
};

const MONTHS = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];

// â”€â”€ COLORS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const POS = '#10D98B', NEU = '#F5A623', NEG = '#FF4C6A', IND = '#7C8FFF';

// â”€â”€ PIE CHART â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
new Chart(document.getElementById('pieChart'), {
  type: 'doughnut',
  data: {
    labels: ['Positive', 'Neutral', 'Negative'],
    datasets: [{ data: [1248, 390, 362], backgroundColor: [POS, NEU, NEG],
      borderColor: '#0D192E', borderWidth: 4, hoverOffset: 8 }]
  },
  options: {
    responsive: true, cutout: '62%',
    plugins: { legend: { display: true, position: 'bottom' }, tooltip: { callbacks: {
      label: ctx => ` ${ctx.label}: ${ctx.raw} (${(ctx.raw/2000*100).toFixed(1)}%)`
    }, ...TT }},
  }
});

// â”€â”€ CATEGORY BAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
new Chart(document.getElementById('catChart'), {
  type: 'bar',
  data: {
    labels: ['Electronics','Clothing','Home & Kitchen','Sports','Beauty'],
    datasets: [
      { label:'Positive', data:[265,238,290,248,207], backgroundColor:POS+'CC', borderRadius:3 },
      { label:'Neutral',  data:[82, 74, 78, 80, 76],  backgroundColor:NEU+'CC', borderRadius:3 },
      { label:'Negative', data:[53, 88, 32, 72, 117],  backgroundColor:NEG+'CC', borderRadius:3 },
    ]
  },
  options: {
    responsive: true, maintainAspectRatio: false,
    plugins: { legend: { display:true, position:'top', align:'end' }, tooltip: TT },
    scales: {
      x: { stacked:true, grid:{display:false} },
      y: { stacked:true, grid:{color:'#1A2D4A'} }
    }
  }
});

// â”€â”€ TREND CHART â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const months24 = MONTHS.concat(MONTHS).map((m,i)=> i<12 ? m+"'23":m+"'24");
new Chart(document.getElementById('trendChart'), {
  type:'line',
  data:{
    labels: months24,
    datasets:[
      { label:'Positive', data:[46,48,52,55,58,60,58,62,64,60,58,55,52,56,62,65,68,72,70,74,76,72,68,72],
        borderColor:POS, backgroundColor:POS+'14', fill:true, borderWidth:2, tension:0.4, pointRadius:2 },
      { label:'Neutral', data:[18,16,17,16,15,14,16,15,14,16,17,18,16,15,14,16,15,14,16,15,14,16,18,20],
        borderColor:NEU, fill:false, borderWidth:1.5, tension:0.4, pointRadius:2 },
      { label:'Negative', data:[14,12,11,12,10,9,11,10,9,12,13,15,12,11,10,12,10,9,11,10,16,18,22,24],
        borderColor:NEG, fill:false, borderWidth:1.5, tension:0.4, pointRadius:2, borderDash:[4,4] },
    ]
  },
  options:{
    responsive:true, maintainAspectRatio:false,
    plugins:{ legend:{display:true,position:'top',align:'end'}, tooltip:TT },
    scales:{
      x:{grid:{color:'#1A2D4A'}, ticks:{maxRotation:45}},
      y:{grid:{color:'#1A2D4A'}}
    }
  }
});

// â”€â”€ HISTOGRAM â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const histBuckets = [-1,-0.8,-0.6,-0.4,-0.2,0,0.2,0.4,0.6,0.8,1];
new Chart(document.getElementById('histChart'), {
  type:'bar',
  data:{
    labels: histBuckets.slice(0,-1).map((v,i)=>`${v.toFixed(1)}`),
    datasets:[
      { label:'Negative', data:[80,60,50,70,40,0,0,0,0,0], backgroundColor:NEG+'99', borderRadius:2 },
      { label:'Neutral',  data:[0,0,0,0,30,80,40,0,0,0],   backgroundColor:NEU+'99', borderRadius:2 },
      { label:'Positive', data:[0,0,0,0,0,30,120,180,220,280], backgroundColor:POS+'99', borderRadius:2 },
    ]
  },
  options:{
    responsive:true, maintainAspectRatio:false,
    plugins:{ legend:{display:true,position:'top',align:'end'}, tooltip:TT },
    scales:{
      x:{stacked:true, grid:{display:false}, title:{display:true,text:'Compound Score (-1 â†’ +1)'}},
      y:{stacked:true, grid:{color:'#1A2D4A'}}
    }
  }
});

// â”€â”€ ASPECT HEATMAP TABLE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const heatData = {
  'Electronics':     [0.42, 0.31, 0.55, 0.38, 0.61],
  'Clothing':        [0.18,-0.12, 0.42, 0.22, 0.48],
  'Home & Kitchen':  [0.58, 0.44, 0.62, 0.51, 0.68],
  'Sports':          [0.35, 0.28, 0.48, 0.31, 0.52],
  'Beauty':          [0.24,-0.18, 0.35, 0.19, 0.44],
};

function heatColor(v) {
  const t = (v + 1) / 2;
  const r = Math.round(255 * (1 - t));
  const g = Math.round(217 * t);
  const b = Math.round(139 * t + 106 * (1 - t));
  return `rgba(${r},${g},${b},${0.15 + Math.abs(v)*0.5})`;
}

const heatTbody = document.querySelector('#heatTable tbody');
for (const [cat, vals] of Object.entries(heatData)) {
  const tr = document.createElement('tr');
  tr.innerHTML = `<td>${cat}</td>` + vals.map(v =>
    `<td style="background:${heatColor(v)};color:${v>0?'#10D98B':'#FF4C6A'}">${v.toFixed(2)}</td>`
  ).join('');
  heatTbody.appendChild(tr);
}

// â”€â”€ STARS CHART â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
new Chart(document.getElementById('starsChart'), {
  type:'bar',
  data:{
    labels:['1 â­','2 â­','3 â­','4 â­','5 â­'],
    datasets:[
      { label:'Negative', data:[220,142,0,0,0],      backgroundColor:NEG+'CC', borderRadius:3 },
      { label:'Neutral',  data:[0,0,390,0,0],          backgroundColor:NEU+'CC', borderRadius:3 },
      { label:'Positive', data:[0,0,0,480,768],        backgroundColor:POS+'CC', borderRadius:3 },
    ]
  },
  options:{
    responsive:true, maintainAspectRatio:false,
    plugins:{ legend:{display:true,position:'top',align:'end'}, tooltip:TT },
    scales:{
      x:{grid:{display:false}},
      y:{grid:{color:'#1A2D4A'}}
    }
  }
});

// â”€â”€ TOPIC BAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const topics = ['Product Quality','Shipping & Delivery','Customer Service','Value for Money',
                 'Ease of Use','Product Defects','Product Appearance','Overall Experience'];
const topicCounts = [362, 310, 258, 248, 220, 192, 218, 192];

new Chart(document.getElementById('topicBarChart'), {
  type:'bar',
  data:{
    labels: topics,
    datasets:[{ data:topicCounts, backgroundColor:IND+'99', borderRadius:4, borderSkipped:false }]
  },
  options:{
    indexAxis:'y', responsive:true, maintainAspectRatio:false,
    plugins:{ legend:{display:false}, tooltip:TT },
    scales:{
      x:{grid:{color:'#1A2D4A'}},
      y:{grid:{display:false}, ticks:{font:{size:9}}}
    }
  }
});

// â”€â”€ TOPIC SENTIMENT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const topicPos = [152,196,186,168,190,102,164,176];
const topicNeu = [58, 48, 46, 44, 16, 38, 30, 56];
const topicNeg = [152,66, 26, 36, 14, 52, 24, 20];

new Chart(document.getElementById('topicSentChart'), {
  type:'bar',
  data:{
    labels: topics.map(t=>t.split(' ')[0]),
    datasets:[
      { label:'Positive', data:topicPos, backgroundColor:POS+'CC', borderRadius:3 },
      { label:'Neutral',  data:topicNeu, backgroundColor:NEU+'99', borderRadius:3 },
      { label:'Negative', data:topicNeg, backgroundColor:NEG+'CC', borderRadius:3 },
    ]
  },
  options:{
    responsive:true, maintainAspectRatio:false, barPercentage:0.7,
    plugins:{ legend:{display:true,position:'top',align:'end'}, tooltip:TT },
    scales:{
      x:{grid:{display:false}, ticks:{maxRotation:30,font:{size:9}}},
      y:{stacked:false, grid:{color:'#1A2D4A'}}
    }
  }
});

// â”€â”€ TOPIC TABLE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const topicKeywords = [
  'quality, build, material, durable, solid',
  'shipping, delivery, arrived, package, transit',
  'service, support, helpful, response, refund',
  'price, value, worth, money, affordable',
  'easy, simple, intuitive, setup, instructions',
  'broke, broken, defective, stopped, failed',
  'looks, style, color, design, appearance',
  'great, excellent, love, recommend, perfect',
];
const negRates = [42, 21, 10, 15, 6, 27, 11, 10];
const sentLabels = ['Negative','Mixed','Positive','Mixed','Positive','Negative','Positive','Positive'];
const sentColors = [NEG, NEU, POS, NEU, POS, NEG, POS, POS];

const topicTbody = document.querySelector('#topicTable tbody');
topics.forEach((t, i) => {
  const tr = document.createElement('tr');
  tr.innerHTML = `
    <td><strong style="color:var(--ind2)">${t}</strong></td>
    <td>${topicCounts[i]}<span class="topic-bar" style="width:${topicCounts[i]/4}px;margin-left:8px"></span></td>
    <td style="color:${negRates[i]>25?NEG:negRates[i]>15?NEU:POS}">${negRates[i]}%</td>
    <td style="color:var(--dim);font-size:11px">${topicKeywords[i]}</td>
    <td style="color:${sentColors[i]}">${sentLabels[i]}</td>
  `;
  topicTbody.appendChild(tr);
});

// â”€â”€ SCATTER PLOT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const container = document.getElementById('scatterContainer');
const tooltip   = document.getElementById('tooltip');

// Generate clustered points
function genClusters(n, clusters) {
  const pts = [];
  for (let i = 0; i < n; i++) {
    const c = clusters[Math.floor(Math.random() * clusters.length)];
    pts.push({
      x: c.cx + (Math.random()-0.5)*c.spread*2,
      y: c.cy + (Math.random()-0.5)*c.spread*2,
      sentiment: c.sentiments[Math.floor(Math.random()*c.sentiments.length)],
      topic: c.topic,
      text: c.texts[Math.floor(Math.random()*c.texts.length)],
    });
  }
  return pts;
}

const CLUSTERS = [
  { cx:25, cy:30, spread:12, topic:'Product Quality', sentiments:['neg','neg','neu'],
    texts:['Quality is really poor, broke after a week.','Material feels cheap and flimsy.','Build quality met expectations.'] },
  { cx:65, cy:20, spread:10, topic:'Shipping & Delivery', sentiments:['pos','pos','neu'],
    texts:['Arrived super fast, great packaging!','Delivery was on time as promised.','Package was a bit dented but product OK.'] },
  { cx:80, cy:60, spread:11, topic:'Ease of Use', sentiments:['pos','pos','pos'],
    texts:['So easy to set up, works perfectly!','Intuitive design, used it immediately.','Simple and straightforward to use.'] },
  { cx:35, cy:70, spread:10, topic:'Customer Service', sentiments:['pos','neu','neg'],
    texts:['Support resolved my issue in minutes!','Response was OK but took 2 days.','Customer service was unhelpful.'] },
  { cx:55, cy:75, spread:9,  topic:'Value for Money', sentiments:['pos','neu','neu'],
    texts:['Great value for the price paid.','Reasonable cost for what you get.','A bit expensive for average quality.'] },
  { cx:15, cy:60, spread:8,  topic:'Product Defects', sentiments:['neg','neg','neu'],
    texts:['Stopped working after one month.','Defective product, had to return it.','Minor issues but still functional.'] },
];

const points = genClusters(800, CLUSTERS);
const W = container.offsetWidth || 700, H = container.offsetHeight || 380;

let currentColorBy = 'sentiment';

function renderDots() {
  container.innerHTML = '';
  const TOPIC_COLORS_MAP = {
    'Product Quality':'#7C8FFF', 'Shipping & Delivery':'#22D3EE',
    'Ease of Use':'#10D98B', 'Customer Service':'#F472B6',
    'Value for Money':'#F5A623', 'Product Defects':'#FF4C6A',
  };
  points.forEach(p => {
    const dot = document.createElement('div');
    dot.className = 'dot';
    dot.style.left = (p.x / 100 * (W-20) + 10) + 'px';
    dot.style.top  = (p.y / 100 * (H-20) + 10) + 'px';

    if (currentColorBy === 'sentiment') {
      dot.classList.add(p.sentiment);
    } else {
      dot.style.background = TOPIC_COLORS_MAP[p.topic] || '#5A7A9E';
    }

    dot.addEventListener('mouseenter', e => {
      tooltip.innerHTML = `<strong>${p.topic}</strong><br><span style="color:${p.sentiment==='pos'?POS:p.sentiment==='neg'?NEG:NEU}">${p.sentiment.toUpperCase()}</span><br>${p.text}`;
      tooltip.style.opacity = '1';
    });
    dot.addEventListener('mousemove', e => {
      tooltip.style.left = (e.clientX+12)+'px';
      tooltip.style.top  = (e.clientY+12)+'px';
    });
    dot.addEventListener('mouseleave', () => { tooltip.style.opacity='0'; });

    container.appendChild(dot);
  });
}

renderDots();

function colorBy(type) {
  currentColorBy = type;
  document.getElementById('colorBySent').className = type==='sentiment' ? 'badge badge-ind' : 'badge';
  document.getElementById('colorBySent').style = type==='sentiment' ? '' : 'cursor:pointer;background:var(--bg3);color:var(--dim);border:1px solid var(--border)';
  document.getElementById('colorByTopic').className = type==='topic' ? 'badge badge-ind' : 'badge';
  document.getElementById('colorByTopic').style = type==='topic' ? '' : 'cursor:pointer;background:var(--bg3);color:var(--dim);border:1px solid var(--border)';
  renderDots();
}

// â”€â”€ SEMANTIC SEARCH â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const SAMPLE_REVIEWS = [
  { text:"The product stopped working after just two weeks. Very disappointed with the quality. Will be returning.", sentiment:"negative", stars:1, topic:"Product Defects" },
  { text:"Excellent customer service! They resolved my issue within hours and even sent a replacement for free.", sentiment:"positive", stars:5, topic:"Customer Service" },
  { text:"Great value for the price. It's not perfect but for the cost it's hard to complain. Would buy again.", sentiment:"positive", stars:4, topic:"Value for Money" },
  { text:"Shipping took 3 weeks and the package arrived damaged. The product inside was fine but the wait was frustrating.", sentiment:"negative", stars:2, topic:"Shipping & Delivery" },
  { text:"Super easy to set up and use right out of the box. The instructions were clear and everything worked first try.", sentiment:"positive", stars:5, topic:"Ease of Use" },
  { text:"Quality seems decent for the price range. Nothing spectacular but it does the job.", sentiment:"neutral", stars:3, topic:"Product Quality" },
  { text:"Best purchase I've made this year! Incredibly well-built, fast delivery, and amazing customer support.", sentiment:"positive", stars:5, topic:"Overall Experience" },
  { text:"Looks good but the material feels a bit flimsy. Time will tell if it holds up long-term.", sentiment:"neutral", stars:3, topic:"Product Quality" },
];

function runSearch() {
  const query = document.getElementById('searchInput').value.toLowerCase();
  const results = document.getElementById('searchResults');

  if (!query.trim()) {
    results.innerHTML = '<div style="color:var(--dim);font-size:12px">Enter a search query above</div>';
    return;
  }

  const keywords = query.split(' ').filter(w => w.length > 2);
  const matches = SAMPLE_REVIEWS.filter(r =>
    keywords.some(kw => r.text.toLowerCase().includes(kw) || r.topic.toLowerCase().includes(kw))
  ).slice(0, 5);

  const shown = matches.length > 0 ? matches : SAMPLE_REVIEWS.slice(0, 4);
  const emoji = { positive:'ğŸŸ¢', neutral:'ğŸŸ¡', negative:'ğŸ”´' };

  results.innerHTML = `
    <div style="font-size:11px;color:var(--dim);margin-bottom:12px">${shown.length} results for: <em style="color:var(--text)">${query}</em></div>
    ${shown.map(r => `
    <div class="review-card">
      <div class="review-meta">
        <span>${emoji[r.sentiment]} <strong>${r.sentiment}</strong></span>
        <span>â­ ${r.stars}</span>
        <span style="color:var(--ind2)">${r.topic}</span>
      </div>
      <div class="review-text">${r.text}</div>
    </div>`).join('')}
  `;
}

// Enter key search
document.getElementById('searchInput')?.addEventListener('keydown', e => {
  if (e.key === 'Enter') runSearch();
});

</script>
</body>
</html>
